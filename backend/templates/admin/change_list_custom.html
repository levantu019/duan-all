{% extends "admin/change_list.html" %}
{% load i18n admin_urls static admin_list jazzmin %}
{% load tree_view %}


{% block content %}
    <div class="col-12">
        <div class="card card-primary card-outline">
            <div class="card-body">
                {% comment %} Search {% endcomment %}
                {% block search %}
                    {% search_form cl %}
                {% endblock %}

                {% comment %}  {% endcomment %}
                <form id="changelist-form" method="post"{% if cl.formset and cl.formset.is_multipart %}enctype="multipart/form-data"{% endif %} novalidate>{% csrf_token %}
                    <div id="content-main">
                        {% if cl.formset and cl.formset.errors %}
                        <p class="errornote">
                            {% if cl.formset.total_error_count == 1 %}
                                {% trans "Please correct the error below." %}
                            {% else %}
                                {% trans "Please correct the errors below." %}
                            {% endif %}
                        </p>
                        {{ cl.formset.non_form_errors }}
                        {% endif %}
                        <div class="module{% if cl.has_filters %} filtered{% endif %}" id="changelist">
                        <div class="row">
                            <div class="col-12">
                                {% if cl.formset %}
                                    <div>{{ cl.formset.management_form }}</div>
                                {% endif %}

                                {% block result_list %}                                    
                                    <div class="row">
                                        <div class="col-12 col-sm-2">
                                            {% comment %} {% if action_form and actions_on_top and cl.show_admin_actions %}
                                                {% admin_actions %}
                                            {% endif %} {% endcomment %}
                                        </div>
                                        <div class="col-12 col-sm-10 d-flex flex-row-reverse flex-wrap" style="gap: 10px">
                                            {% block object-tools %}     
                                                {% comment %} Extra tools {% endcomment %}
                                                {% for tool in extra_tools %}
                                                    {% if tool.use %}
                                                        <div class="btn-group">
                                                            <a href="{{tool.link}}" type="button" class="btn btn-outline-primary rounded" {% for data in tool.data %}data-{{data.name}}="{{data.value}}" {% endfor %}>
                                                                <i class="{{tool.icon}}"></i> &nbsp; {{tool.text}}
                                                            </a>
                                                        </div>
                                                    {% endif %}
                                                {% endfor %}

                                                {% comment %} Button default {% endcomment %}
                                                {% if btn_default %}
                                                    {% block object-tools-items %}
                                                        {% change_list_object_tools %}
                                                    {% endblock %}  
                                                {% endif %}                                              
                                                
                                                {% comment %} Button delete {% endcomment %}
                                                {% if btn_delete.use %}
                                                    <div class="btn-group actions">
                                                        <input type="hidden" name="action" value="{{btn_delete.value}}"/>
                                                        <input type="hidden" name="select_across" value="0" class="select-across">
                                                        <button type="submit" class="btn btn-outline-primary rounded" name="index" value="0"><i class="fa fa-trash"></i> &nbsp;Xo√°</button>
                                                        <span class="action-counter" data-actions-icnt="{{ cl.result_list|length }}"></span>  
                                                    </div>
                                                {% endif %}
                                            {% endblock %}
                                        </div>
                                    </div>
                                    <hr/>
                                    {% if model_is_tree %}
                                        {% tree_result_list cl %}
                                    {% else %}
                                        {% result_list cl %}
                                    {% endif %}
                                    {% if action_form and actions_on_bottom and cl.show_admin_actions %}
                                        <div class="row">
                                            <div class="col-12">
                                                {% admin_actions %}
                                            </div>
                                        </div>
                                    {% endif %}
                                {% endblock %}
                            </div>
                        </div>
                        <div class="row">
                            {% block pagination %}{% pagination cl %}{% endblock %}
                        </div>
                    </div>
                </form>
            </div>
            </div>
        </div>
        <br class="clear"/>
    </div>
{% endblock %}


{% comment %} Modal {% endcomment %}
{% block modal-field %}
    {% for tool in extra_tools %}
        {% if tool.template %}
            {% include tool.template with action=tool.action %}
        {% endif %}
    {% endfor %}
{% endblock %}